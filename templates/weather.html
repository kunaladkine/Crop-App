{% extends "base.html" %}
{% block content %}

<!-- ğŸ” SEARCH SECTION -->
<div class="p-4 text-center rounded-4 mb-4" style="background:linear-gradient(120deg,#6fb1fc,#4364f7,#3f5efb); color:white;">
    <h1 class="fw-bold">ğŸŒ¦ Weather Forecast</h1>
    <p class="mb-3">Get 6-day weather prediction for your farming decisions</p>

    <form method="POST" class="d-flex gap-2 justify-content-center" style="max-width:500px; margin:auto;">
        <input type="text" name="city" class="form-control form-control-lg" placeholder="Enter City Name (e.g., Mumbai)" required>
        <button class="btn btn-light btn-lg">ğŸ” Search</button>
    </form>
</div>

{% if weather_data == "error" %}
<div class="alert alert-danger text-center fw-bold">âŒ City not found! Please try again.</div>
{% endif %}

{% if weather_data %}
<h3 class="fw-bold mt-3 text-center">ğŸ“ Showing Forecast For: {{ city|title }}</h3>
<div class="row g-4 mt-1">

    {% for day in weather_data %}
    <div class="col-md-4">
        <div class="card p-4 text-center shadow border-0 rounded-4">
            
            <h5 class="fw-bold mb-2">{{ day.date }}</h5>

            <!-- Weather Icon (Generate from description) -->
            {% if "rain" in day.description %}
                <div style="font-size:40px;">ğŸŒ§ï¸</div>
            {% elif "cloud" in day.description %}
                <div style="font-size:40px;">â˜ï¸</div>
            {% elif "sun" in day.description or "clear" in day.description %}
                <div style="font-size:40px;">â˜€ï¸</div>
            {% elif "storm" in day.description %}
                <div style="font-size:40px;">ğŸŒ©ï¸</div>
            {% else %}
                <div style="font-size:40px;">ğŸŒ¤ï¸</div>
            {% endif %}

            <p class="mt-3">ğŸŒ¡ <b>{{ day.temp }}Â°C</b> Temperature</p>
            <p>ğŸ’§ Humidity: <b>{{ day.humidity }}%</b></p>
            <p>ğŸ“ Condition: <b>{{ day.description | title }}</b></p>
        </div>
    </div>
    {% endfor %}
</div>

<!-- SUGGEST CROP ACTIONS -->
<div class="alert alert-info mt-4 text-center">
    ğŸŒ± <b>Tip:</b> Match weather with crop recommendations for better yield!
    <a href="/crop" class="btn btn-sm btn-success ms-2">Try Crop Tool â†’</a>
</div>
{% endif %}

{% endblock %}
